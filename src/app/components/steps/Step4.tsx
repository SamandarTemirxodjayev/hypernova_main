import React, { useEffect, useState } from "react";
import "../style.css";

const Step4 = () => {
  const [showStep4, setShowStep4] = useState(false);
  const [isMobile, setIsMobile] = useState(false);

  const handleStep4Hover = () => {
    if (!isMobile) {
      const progressBar = document.getElementById("progress_step4");
      if (progressBar) {
        progressBar.style.width = "100%";

        setTimeout(() => {
          setShowStep4(true);
        }, 2500); // Adjust this timeout based on your transition duration
      }
    }
  };

  useEffect(() => {
    const setMobileStatus = () => {
      if (window.innerWidth < 768) {
        setIsMobile(true);
      } else {
        setIsMobile(false);
      }
    };

    setMobileStatus();
    window.addEventListener("resize", setMobileStatus);
    return () => window.removeEventListener("resize", setMobileStatus);
  }, []);
  return (
    <div className="flex xs:flex-row lg:flex-row-reverse items-center xs:text-[14px]">
      <p className="ps-4 xs:hidden lg:block lg:text-[32px] xs:text-[14px]">
        Step 4
      </p>
      <span className="circle lg:block xs:hidden"></span>
      <div className="progress-bar-right lg:block xs:hidden">
        <span
          id="progress_step4"
          style={{ width: "0%" }}
          className="percentage-right transition-width duration-[2s] ease-in-out"
        ></span>
      </div>
      <span
        onMouseEnter={handleStep4Hover}
        className={`bg-mainWhite p-8 z-10 inner rounded-full ${
          isMobile ? "pointer-events-none" : ""
        }`}
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          className="xs:w-[30px] lg:w-[42px] xs:h-[30px] lg:h-[42px]"
          viewBox="0 0 42 42"
          fill="none"
        >
          <path
            d="M14.9753 16.1907L12.4249 18.7428L14.9753 21.2949C15.1032 21.4141 15.2058 21.5579 15.277 21.7176C15.3481 21.8773 15.3864 22.0497 15.3895 22.2246C15.3926 22.3994 15.3604 22.573 15.2949 22.7352C15.2294 22.8973 15.132 23.0446 15.0083 23.1682C14.8847 23.2919 14.7374 23.3894 14.5753 23.4548C14.4131 23.5203 14.2395 23.5525 14.0646 23.5494C13.8898 23.5463 13.7174 23.5081 13.5577 23.4369C13.3979 23.3657 13.2542 23.2631 13.135 23.1352L9.66277 19.663C9.54182 19.5422 9.44588 19.3988 9.38041 19.2409C9.31495 19.083 9.28125 18.9137 9.28125 18.7428C9.28125 18.5719 9.31495 18.4027 9.38041 18.2448C9.44588 18.0869 9.54182 17.9435 9.66277 17.8227L13.135 14.3505C13.2542 14.2225 13.3979 14.1199 13.5577 14.0488C13.7174 13.9776 13.8898 13.9393 14.0646 13.9362C14.2395 13.9332 14.4131 13.9653 14.5753 14.0308C14.7374 14.0963 14.8847 14.1938 15.0083 14.3174C15.132 14.4411 15.2294 14.5883 15.2949 14.7505C15.3604 14.9126 15.3926 15.0863 15.3895 15.2611C15.3864 15.4359 15.3481 15.6083 15.277 15.7681C15.2058 15.9278 15.1032 16.0715 14.9753 16.1907ZM32.3364 17.8227L28.8642 14.3505C28.745 14.2225 28.6012 14.1199 28.4415 14.0488C28.2818 13.9776 28.1093 13.9393 27.9345 13.9362C27.7597 13.9332 27.586 13.9653 27.4239 14.0308C27.2618 14.0963 27.1145 14.1938 26.9908 14.3174C26.8672 14.4411 26.7697 14.5883 26.7042 14.7505C26.6387 14.9126 26.6066 15.0863 26.6097 15.2611C26.6127 15.4359 26.651 15.6083 26.7222 15.7681C26.7933 15.9278 26.896 16.0715 27.0239 16.1907L29.5742 18.7428L27.0239 21.2949C26.896 21.4141 26.7933 21.5579 26.7222 21.7176C26.651 21.8773 26.6127 22.0497 26.6097 22.2246C26.6066 22.3994 26.6387 22.573 26.7042 22.7352C26.7697 22.8973 26.8672 23.0446 26.9908 23.1682C27.1145 23.2919 27.2618 23.3894 27.4239 23.4548C27.586 23.5203 27.7597 23.5525 27.9345 23.5494C28.1093 23.5463 28.2818 23.5081 28.4415 23.4369C28.6012 23.3657 28.745 23.2631 28.8642 23.1352L32.3364 19.663C32.4573 19.5422 32.5533 19.3988 32.6187 19.2409C32.6842 19.083 32.7179 18.9137 32.7179 18.7428C32.7179 18.5719 32.6842 18.4027 32.6187 18.2448C32.5533 18.0869 32.4573 17.9435 32.3364 17.8227Z"
            fill="#3C096C"
          />
          <path
            d="M36.6784 5.27048C35.4952 4.21557 34.1129 3.40795 32.6129 2.89514C31.1129 2.38232 29.5255 2.17466 27.9441 2.28437H14.0552C6.38851 2.28437 2.33643 6.33645 2.33643 14.0031V22.6837C2.33643 27.3052 3.30518 30.3069 5.38504 32.1281C7.6767 34.1316 11.0534 34.4024 14.0552 34.4024H14.9232C15.0512 34.4316 15.1703 34.4911 15.2705 34.576L17.8746 38.0483C18.2289 38.5511 18.6961 38.9639 19.2389 39.2533C19.7816 39.5428 20.3847 39.7009 20.9996 39.7149C21.6145 39.7005 22.2174 39.5422 22.7601 39.2528C23.3028 38.9633 23.7701 38.5508 24.1246 38.0483L26.7288 34.576C26.7691 34.522 26.8215 34.4782 26.8818 34.4481C26.9421 34.4179 27.0086 34.4023 27.076 34.4024H27.9441C35.6107 34.4024 39.6628 30.3503 39.6628 22.6837V14.0031C39.7728 12.4221 39.5655 10.835 39.0529 9.33527C38.5404 7.83556 37.7331 6.45352 36.6784 5.27048ZM37.0586 22.6837C37.0586 28.9024 34.1628 31.7983 27.9441 31.7983H27.076C26.6045 31.7993 26.1397 31.9096 25.718 32.1205C25.2963 32.3313 24.9292 32.637 24.6455 33.0135L22.0413 36.4858C21.9406 36.6745 21.7905 36.8324 21.607 36.9425C21.4235 37.0526 21.2136 37.1108 20.9996 37.1108C20.7857 37.1108 20.5757 37.0526 20.3922 36.9425C20.2088 36.8324 20.0586 36.6745 19.958 36.4858L17.3538 33.0135C17.0591 32.6489 16.6897 32.3518 16.2704 32.1421C15.8511 31.9325 15.3917 31.8152 14.9232 31.7983H14.0552C10.4875 31.7983 8.40761 31.3104 7.10031 30.168C5.62636 28.8781 4.94059 26.4996 4.94059 22.6837V14.0031C4.94059 7.78437 7.83643 4.88853 14.0552 4.88853H27.9441C29.1826 4.78709 30.429 4.93118 31.6118 5.31252C32.7945 5.69386 33.8904 6.30496 34.8364 7.11076C35.642 8.05696 36.2529 9.15281 36.6343 10.3355C37.0156 11.5182 37.1598 12.7646 37.0586 14.0031V22.6837ZM23.9319 15.2045L20.4597 23.3069C20.3957 23.4689 20.2998 23.6163 20.1778 23.7405C20.0558 23.8647 19.9101 23.9632 19.7493 24.0301C19.5886 24.0971 19.4161 24.1311 19.2419 24.1302C19.0678 24.1292 18.8956 24.0934 18.7356 24.0248C18.5756 23.9561 18.431 23.8561 18.3103 23.7306C18.1896 23.6051 18.0953 23.4566 18.033 23.294C17.9707 23.1314 17.9416 22.958 17.9475 22.784C17.9534 22.61 17.9942 22.4389 18.0673 22.2809L21.5396 14.1785C21.6036 14.0165 21.6994 13.8691 21.8215 13.7449C21.9435 13.6207 22.0892 13.5222 22.2499 13.4553C22.4107 13.3883 22.5832 13.3543 22.7573 13.3552C22.9314 13.3562 23.1036 13.392 23.2636 13.4606C23.4236 13.5293 23.5683 13.6293 23.689 13.7548C23.8097 13.8803 23.9039 14.0288 23.9662 14.1914C24.0286 14.354 24.0576 14.5274 24.0517 14.7014C24.0458 14.8754 24.0051 15.0465 23.9319 15.2045Z"
            fill="#3C096C"
          />
        </svg>
      </span>
      <div
        className={`${
          isMobile
            ? "visible opacity-100 left"
            : showStep4
            ? "opacity-100"
            : "opacity-0 invisible"
        } bg-gray-200 p-4 lg:mr-24 xs:-ml-4 speech right transition-opacity duration-500 ease-in-out`}
      >
        Once the design is approved, move on to the code portion of the project
        and complete it.
      </div>
    </div>
  );
};

export default Step4;
